(()=>{var e={};e.id=457,e.ids=[457],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},13247:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l});var s=r(49442),a=r(10042),n=r(48190),o=r.n(n),i=r(63289),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let l=["",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6323)),"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\categories\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,50934)),"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\categories\\page.js"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/categories/page",pathname:"/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},35401:(e,t,r)=>{Promise.resolve().then(r.bind(r,6323))},93226:(e,t,r)=>{Promise.resolve().then(r.bind(r,62689))},62689:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(20149),a=r(11301),n=r(54288),o=r(63606),i=r(50526),d=r(99548),l=r(47154);function c(){let[e,t]=(0,o.useState)(""),[r,c]=(0,o.useState)([]),{loading:p,data:u}=(0,i.U)(),[m,x]=(0,o.useState)(null),[g,h]=(0,o.useState)(0),[b,f]=(0,o.useState)(5);function j(){fetch("/api/categories").then(e=>e.json()).then(e=>{c(e)}).catch(e=>{d.ZP.error("Failed to fetch categories"),console.error(e)})}async function v(r){r.preventDefault();let s={name:e};m&&(s._id=m._id);let a=m?"PUT":"POST";(await fetch("/api/categories",{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(t(""),j(),x(null),d.ZP.success(m?"Category updated":"Category created")):d.ZP.error("Error, sorry...")}async function w(e){(await fetch(`/api/categories?_id=${e}`,{method:"DELETE"})).ok?(d.ZP.success("Deleted"),j()):d.ZP.error("Error deleting category")}return p?"Loading user info...":u?.admin?(0,s.jsxs)("section",{className:"mt-8 max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,s.jsx)(n.Z,{isAdmin:!0}),(0,s.jsx)("form",{className:"mt-8",onSubmit:v,children:(0,s.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsxs)("label",{children:[m?"Update category":"New category name",m&&(0,s.jsxs)(s.Fragment,{children:[": ",(0,s.jsx)("b",{children:m.name})]})]}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"pb-2 flex gap-2",children:[(0,s.jsx)("button",{className:"border border-green-500",type:"submit",children:m?"Update":"Create"}),(0,s.jsx)("button",{type:"button",onClick:()=>{x(null),t("")},children:"Cancel"})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-8 text-sm text-gray-500",children:"Existing categories"}),r?.length>0&&r.slice(g*b,g*b+b).map(e=>(0,s.jsxs)("div",{className:"bg-gray-100 rounded-xl p- 2 px-4 flex gap-1 mb-1 items-center",children:[(0,s.jsx)("div",{className:"grow",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{className:"button bg-green-500 text-white rounded px-4 py-1",onClick:()=>{x(e),t(e.name)},children:"Edit"}),(0,s.jsx)(a.Z,{className:"bg-red-500 text-white rounded px-4 py-1 hover:bg-red-600",label:"Delete",onDelete:()=>w(e._id)})]})]},e._id))]}),(0,s.jsx)(l.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:b,page:g,onPageChange:(e,t)=>h(t),onRowsPerPageChange:e=>{f(parseInt(e.target.value,10)),h(0)}})]}):"Not an admin"}},11301:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(20149),a=r(63606);function n({label:e,onDelete:t}){let[r,n]=(0,a.useState)(!1);return r?(0,s.jsx)("div",{className:"fixed bg-black/80 inset-0 flex items-center h-full justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,s.jsx)("div",{children:"Are you sure you want to delete?"}),(0,s.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>n(!1),children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{t(),n(!1)},type:"button",className:"primary",children:"Yes,\xa0Delete!"})]})]})}):(0,s.jsx)("button",{type:"button",onClick:()=>n(!0),children:e})}},6323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\codebrew2o\\\\codebrew2\\\\src\\\\app\\\\categories\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\categories\\page.js","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,426,686,795,154,263],()=>r(13247));module.exports=s})();