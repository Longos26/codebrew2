(()=>{var e={};e.id=693,e.ids=[693],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},78709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(49442),a=r(10042),i=r(48190),n=r.n(i),o=r(63289),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["receipt",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,11777)),"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\receipt\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,50934)),"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\receipt\\page.js"],p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/receipt/page",pathname:"/receipt",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},86769:(e,t,r)=>{Promise.resolve().then(r.bind(r,11777))},99633:(e,t,r)=>{Promise.resolve().then(r.bind(r,82738))},12932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var s=r(63606),a=r(96307),i=r(2926),n=r(43322),o=r(18438),l=r(48873),c=r(43706),d=r(36033),p=r(9111),m=r(36418),u=r(60973);function x(e){return(0,u.ZP)("MuiCircularProgress",e)}(0,m.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var h=r(20149);let f=(0,n.F4)`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,g=(0,n.F4)`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,v="string"!=typeof f?(0,n.iv)`
        animation: ${f} 1.4s linear infinite;
      `:null,b="string"!=typeof g?(0,n.iv)`
        animation: ${g} 1.4s ease-in-out infinite;
      `:null,j=e=>{let{classes:t,variant:r,color:s,disableShrink:a}=e,n={root:["root",r,`color${(0,d.Z)(s)}`],svg:["svg"],circle:["circle",`circle${(0,d.Z)(r)}`,a&&"circleDisableShrink"]};return(0,i.Z)(n,x,t)},y=(0,o.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,d.Z)(r.color)}`]]}})((0,l.Z)(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:v||{animation:`${f} 1.4s linear infinite`}},...Object.entries(e.palette).filter((0,p.Z)()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),w=(0,o.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),N=(0,o.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.circle,t[`circle${(0,d.Z)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((0,l.Z)(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink,style:b||{animation:`${g} 1.4s ease-in-out infinite`}}]}))),P=s.forwardRef(function(e,t){let r=(0,c.i)({props:e,name:"MuiCircularProgress"}),{className:s,color:i="primary",disableShrink:n=!1,size:o=40,style:l,thickness:d=3.6,value:p=0,variant:m="indeterminate",...u}=r,x={...r,color:i,disableShrink:n,size:o,thickness:d,value:p,variant:m},f=j(x),g={},v={},b={};if("determinate"===m){let e=2*Math.PI*((44-d)/2);g.strokeDasharray=e.toFixed(3),b["aria-valuenow"]=Math.round(p),g.strokeDashoffset=`${((100-p)/100*e).toFixed(3)}px`,v.transform="rotate(-90deg)"}return(0,h.jsx)(y,{className:(0,a.Z)(f.root,s),style:{width:o,height:o,...v,...l},ownerState:x,ref:t,role:"progressbar",...b,...u,children:(0,h.jsx)(w,{className:f.svg,ownerState:x,viewBox:"22 22 44 44",children:(0,h.jsx)(N,{className:f.circle,style:g,ownerState:x,cx:44,cy:44,r:(44-d)/2,fill:"none",strokeWidth:d})})})})},82738:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(20149),a=r(54288),i=r(63606),n=r(4619),o=r(99548),l=r(50526),c=r(9277),d=r(63779),p=r(47154),m=r(44296),u=r(12932);let x=()=>{let[e,t]=(0,i.useState)([]),[r,x]=(0,i.useState)(!0),[h,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)(null),{loading:b,data:j}=(0,l.U)(),[y,w]=(0,i.useState)(!1),[N,P]=(0,i.useState)(0),[k,C]=(0,i.useState)(5);(0,n.useRouter)();let Z=async()=>{x(!0);try{let e=await fetch("/api/receipt",{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch receipts");let r=await e.json();t(r)}catch(e){console.error("Error fetching receipts:",e),o.ZP.error("Failed to load receipts")}finally{x(!1)}};(0,i.useEffect)(()=>{Z();let e=setInterval(Z,3e4);return()=>clearInterval(e)},[]);let S=e=>{v(e),w(!0)},_=async e=>{f(!0);try{if(!(await fetch(`/api/receipt?id=${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete receipt");t(t=>t.filter(t=>t._id!==e)),o.ZP.success("Receipt deleted successfully")}catch(e){console.error("Error deleting receipt:",e),o.ZP.error(e.message)}finally{f(!1)}};return b?"Loading user info...":j?.admin?(0,s.jsxs)("section",{className:"mt-8 max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,s.jsx)(a.Z,{isAdmin:!0}),(0,s.jsx)("div",{className:"flex justify-between items-center mt-8",children:(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Receipts"})}),(0,s.jsxs)("button",{onClick:()=>{if(0===e.length){o.ZP.error("No data available for download.");return}let t=d.P6.json_to_sheet(e.map(e=>({"Staff Name":e.customer?.staffname||"N/A",Subtotal:`₱${e.subtotal.toFixed(2)}`,"Created At":new Date(e.createdAt).toLocaleString("en-PH")}))),r=d.P6.book_new();d.P6.book_append_sheet(r,t,"Receipts"),d.NC(r,"receipts.xlsx")},className:" bg-green-500 text-white rounded-md hover:bg-green-600",children:[(0,s.jsx)(m.Z,{})," Download Excel"]}),(0,s.jsx)("div",{className:"mt-8",children:r?(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)(u.Z,{})}):e.length>0?e.slice(N*k,N*k+k).map(e=>(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg mb-2 p-4 flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 grow",children:[(0,s.jsx)("div",{className:"text-gray-900",children:e.customer?(0,s.jsx)("span",{children:e.customer.staffname}):(0,s.jsx)("span",{className:"italic",children:"No Name"})}),(0,s.jsxs)("span",{className:"text-gray-500",children:["₱",e.subtotal.toFixed(2)]}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleString("en-PH")})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>S(e),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"View"}),(0,s.jsx)("button",{onClick:()=>_(e._id),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",disabled:h,children:h?"Deleting...":"Delete"})]})]},e._id)):(0,s.jsx)("p",{className:"text-gray-500",children:"No receipts found."})}),(0,s.jsx)(c.Z,{isOpen:y,onClose:()=>w(!1),receipt:g}),(0,s.jsx)(p.Z,{component:"div",count:e.length,page:N,onPageChange:(e,t)=>{P(t)},rowsPerPage:k,onRowsPerPageChange:e=>{C(parseInt(e.target.value,10)),P(0)}})]}):"Not an admin"}},9277:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(20149);r(63606);var a=r(14971),i=r(94035);let n=({isOpen:e,onClose:t,receipt:r})=>{if(!e)return null;if(!r)return(0,s.jsx)("p",{children:"No receipt data available."});let n=r.subtotal||0,o=r.customer?.staffname||"No Name",l=r.cartProducts||[],c=r.createdAt||null;return console.log("Cart Products:",l),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)(a.default,{src:"/tealerinlogo.png",alt:"Company Logo",width:150,height:50,className:"mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"TeaLerin"}),(0,s.jsx)("p",{children:"Contact: 0927-368-5006 | Block 10 Lot 23 Long Road"})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700",children:"Staff Information"}),(0,s.jsxs)("p",{children:["Name: ",(0,s.jsx)("span",{className:"font-medium",children:o})]}),(0,s.jsxs)("p",{children:["Date: ",(0,s.jsx)("span",{className:"font-medium",children:c?new Date(c).toLocaleString():"N/A"})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700",children:"Products"}),(0,s.jsx)("ul",{className:"divide-y divide-gray-200",children:l.length>0?l.map((e,t)=>{let r=(((0,i.B)(e)||0)*e.quantity).toFixed(2);return(0,s.jsxs)("li",{className:"flex justify-between py-2",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:[e.name," (x",e.quantity,")"]}),(0,s.jsxs)("span",{className:"font-medium",children:["₱",r]})]},t)}):(0,s.jsx)("p",{className:"text-gray-500",children:"No products in cart."})})]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between font-bold text-gray-800",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["₱",n.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"mt-4 border-t pt-4 text-center text-gray-600",children:[(0,s.jsx)("p",{children:"Thank you for your purchase!"}),(0,s.jsx)("p",{children:"Visit us again!"}),(0,s.jsxs)("p",{children:["Please note that this is a non-refundable amount. For any assistance, please email",(0,s.jsx)("b",{children:" paolonavarrosa@gmail.com"}),"."]})]}),(0,s.jsx)("button",{className:"mt-4 px-4 py-2 bg-green-500 text-white rounded",onClick:t,children:"Close"})]})})}},11777:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\codebrew2o\\\\codebrew2\\\\src\\\\app\\\\receipt\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\receipt\\page.js","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,426,686,971,795,154,269,263],()=>r(78709));module.exports=s})();