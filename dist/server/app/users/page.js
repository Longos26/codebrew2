(()=>{var e={};e.id=240,e.ids=[240],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},79089:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(49442),a=t(10042),i=t(48190),o=t.n(i),n=t(63289),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,49812)),"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\users\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,50934)),"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\users\\page.js"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},24058:(e,r,t)=>{Promise.resolve().then(t.bind(t,49812))},33997:(e,r,t)=>{Promise.resolve().then(t.bind(t,70451))},12932:(e,r,t)=>{"use strict";t.d(r,{Z:()=>N});var s=t(63606),a=t(96307),i=t(2926),o=t(43322),n=t(18438),l=t(48873),d=t(43706),c=t(36033),u=t(9111),p=t(36418),m=t(60973);function h(e){return(0,m.ZP)("MuiCircularProgress",e)}(0,p.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var x=t(20149);let g=(0,o.F4)`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,f=(0,o.F4)`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,v="string"!=typeof g?(0,o.iv)`
        animation: ${g} 1.4s linear infinite;
      `:null,b="string"!=typeof f?(0,o.iv)`
        animation: ${f} 1.4s ease-in-out infinite;
      `:null,y=e=>{let{classes:r,variant:t,color:s,disableShrink:a}=e,o={root:["root",t,`color${(0,c.Z)(s)}`],svg:["svg"],circle:["circle",`circle${(0,c.Z)(t)}`,a&&"circleDisableShrink"]};return(0,i.Z)(o,h,r)},j=(0,n.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,c.Z)(t.color)}`]]}})((0,l.Z)(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:v||{animation:`${g} 1.4s linear infinite`}},...Object.entries(e.palette).filter((0,u.Z)()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}}))]}))),w=(0,n.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),k=(0,n.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.circle,r[`circle${(0,c.Z)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})((0,l.Z)(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink,style:b||{animation:`${f} 1.4s ease-in-out infinite`}}]}))),N=s.forwardRef(function(e,r){let t=(0,d.i)({props:e,name:"MuiCircularProgress"}),{className:s,color:i="primary",disableShrink:o=!1,size:n=40,style:l,thickness:c=3.6,value:u=0,variant:p="indeterminate",...m}=t,h={...t,color:i,disableShrink:o,size:n,thickness:c,value:u,variant:p},g=y(h),f={},v={},b={};if("determinate"===p){let e=2*Math.PI*((44-c)/2);f.strokeDasharray=e.toFixed(3),b["aria-valuenow"]=Math.round(u),f.strokeDashoffset=`${((100-u)/100*e).toFixed(3)}px`,v.transform="rotate(-90deg)"}return(0,x.jsx)(j,{className:(0,a.Z)(g.root,s),style:{width:n,height:n,...v,...l},ownerState:h,ref:r,role:"progressbar",...b,...m,children:(0,x.jsx)(w,{className:g.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,x.jsx)(k,{className:g.circle,style:f,ownerState:h,cx:44,cy:44,r:(44-c)/2,fill:"none",strokeWidth:c})})})})},70451:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(20149),a=t(63606),i=t(54288),o=t(47154),n=t(50526);function l({user:e,isOpen:r,onClose:t}){let[i,o]=(0,a.useState)(e?.name||""),[n,l]=(0,a.useState)(e?.email||""),[d,c]=(0,a.useState)(e?.admin||!1),[u,p]=(0,a.useState)(e?.isVerified||!1),m=async()=>{if(!e?._id){alert("User ID is missing.");return}let r={_id:e._id,name:i,email:n,admin:d,isVerified:u};try{let e=await fetch("/api/modal",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw Error("Failed to update user");await e.json(),alert("User updated successfully"),t()}catch(e){console.error("Error updating user:",e),alert("Failed to update user. Please try again.")}};return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Edit User"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:i,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:n,onChange:e=>l(e.target.value)})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:d,onChange:e=>c(e.target.checked)}),(0,s.jsx)("span",{className:"ml-2",children:"Admin"})]})}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:u,onChange:e=>p(e.target.checked)}),(0,s.jsx)("span",{className:"ml-2",children:"Verify User"})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-500 text-white rounded-md",onClick:t,children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md",onClick:m,children:"Save"})]})]})}):null}var d=t(12932);function c(){let[e,r]=(0,a.useState)([]),[t,c]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),{loading:m,data:h}=(0,n.U)(),[x,g]=(0,a.useState)(!0),[f,v]=(0,a.useState)(0),[b,y]=(0,a.useState)(5),j=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let t=await fetch(`/api/users?id=${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete user")}r(r=>r.filter(r=>r._id!==e)),alert("User deleted successfully.")}catch(e){console.error("Error deleting user:",e),alert("An error occurred while deleting the user.")}},w=async e=>{try{if(!e._id)throw Error("User ID is required for update");let t=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update user")}let{user:s}=await t.json();r(e=>e.map(e=>e._id===s._id?s:e)),alert("User updated successfully.")}catch(e){console.error("Error updating user:",e),alert(`An error occurred while updating the user: ${e.message}`)}},k=e=>{p(e),c(!0)};return m?"Loading user info...":h?.admin?(0,s.jsxs)("section",{className:"mt-8 max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,s.jsx)(i.Z,{isAdmin:!0}),(0,s.jsx)("div",{className:"mt-8",children:x?(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)(d.Z,{})}):e.length>0?e.slice(f*b,f*b+b).map(e=>(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg mb-2 p-1 px-4 flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 grow",children:[(0,s.jsx)("div",{className:"text-gray-900",children:e.name||(0,s.jsx)("span",{className:"italic",children:"No name"})}),(0,s.jsx)("span",{className:"text-gray-500",children:e.email})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>k(e),className:"button bg-green-500 text-white rounded px-4 py-1",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>j(e._id),className:"button bg-red-500 text-white rounded px-4 py-1",children:"Delete"})]})]},e._id)):(0,s.jsx)("p",{className:"text-gray-500",children:"No users found."})}),(0,s.jsx)(o.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:e.length,rowsPerPage:b,page:f,onPageChange:(e,r)=>v(r),onRowsPerPageChange:e=>{y(parseInt(e.target.value,10)),v(0)}}),u&&(0,s.jsx)(l,{user:u,isOpen:t,onClose:()=>c(!1),onUpdate:w})]}):"Not an admin"}},49812:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\codebrew2o\\\\codebrew2\\\\src\\\\app\\\\users\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\codebrew2o\\codebrew2\\src\\app\\users\\page.js","default")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[492,426,686,795,154,263],()=>t(79089));module.exports=s})();