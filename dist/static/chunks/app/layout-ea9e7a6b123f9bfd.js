(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{8606:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4846,23)),Promise.resolve().then(r.bind(r,4962)),Promise.resolve().then(r.t.bind(r,3275,23)),Promise.resolve().then(r.bind(r,6425)),Promise.resolve().then(r.bind(r,3230))},6425:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,AppProvider:()=>d,B:()=>o});var s=r(7437),l=r(998),n=r(2265),i=r(4962);let a=(0,n.createContext)({});function o(e){var t;let r=e.basePrice||0;if((null===(t=e.size)||void 0===t?void 0:t.price)&&(r+=e.size.price),Array.isArray(e.extras))for(let t of e.extras)r+=t.price||0;return r*(e.quantity||1)}function d(e){let{children:t}=e,[r,o]=(0,n.useState)([]),d=window.localStorage;function c(e){d&&d.setItem("cart",JSON.stringify(e))}return(0,n.useEffect)(()=>{if(d&&d.getItem("cart"))try{let e=JSON.parse(d.getItem("cart"));Array.isArray(e)&&o(e)}catch(e){console.error("Failed to parse cart from localStorage:",e),d.removeItem("cart")}},[d]),(0,s.jsx)(l.SessionProvider,{children:(0,s.jsx)(a.Provider,{value:{cartProducts:r,setCartProducts:o,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!((e.stock||0)>0)){i.ZP.error("Cannot add item to cart");return}o(l=>{let n=l.findIndex(s=>{var l;return s._id===e._id&&(null===(l=s.size)||void 0===l?void 0:l._id)===(null==t?void 0:t._id)&&JSON.stringify(s.extras)===JSON.stringify(r)});if(-1!==n){let e=[...l];return e[n].quantity+=s,c(e),e}{let n=[...l,{...e,size:t,extras:r,quantity:s}];return c(n),n}})},removeCartProduct:function(e){o(t=>{let r=t.filter((t,r)=>r!==e);return c(r),r}),i.ZP.success("Product removed")},clearCart:function(){o([]),c([])}},children:t})})}},3230:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(7437),l=r(6425);function n(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})})}function i(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})})}var a=r(998),o=r(7138),d=r(2265);function c(e){let{status:t,userName:r}=e;return"authenticated"===t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.default,{href:"/profile",className:"whitespace-nowrap",children:["Hello, ",r]}),(0,s.jsx)("button",{onClick:()=>(0,a.signOut)({callbackUrl:"/login"}),className:"bg-green-500 rounded-full text-white px-8 py-2",children:"Logout"})]}):"unauthenticated"===t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{href:"/login",children:"Login"}),(0,s.jsx)(o.default,{href:"/register",className:"bg-green-500 rounded-full text-white px-8 py-2",children:"Register"})]}):void 0}function u(){var e;let t=(0,a.useSession)(),r=null==t?void 0:t.status,u=null===(e=t.data)||void 0===e?void 0:e.user,h=(null==u?void 0:u.name)||(null==u?void 0:u.email),{cartProducts:x}=(0,d.useContext)(l.A),[f,m]=(0,d.useState)(!1);return h&&h.includes(" ")&&(h=h.split(" ")[0]),(0,s.jsxs)("header",{children:[(0,s.jsxs)("div",{className:"flex items-center md:hidden justify-between",children:[(0,s.jsx)(o.default,{className:"text-green font-semibold text-2xl",href:"/",children:"Tealerin Milktea"}),(0,s.jsxs)("div",{className:"flex gap-8 items-center",children:["authenticated"===r&&(0,s.jsxs)(o.default,{href:"/cart",className:"relative",children:[(0,s.jsx)(i,{}),(null==x?void 0:x.length)>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-4 bg-green text-white text-xs py-1 px-1 rounded-full leading-3",children:x.length})]}),(0,s.jsx)("button",{className:"p-1 border",onClick:()=>m(e=>!e),children:(0,s.jsx)(n,{})})]})]}),f&&(0,s.jsxs)("div",{onClick:()=>m(!1),className:"md:hidden p-4 bg-gray-200 rounded-lg mt-2 flex flex-col gap-2 text-center",children:[(0,s.jsx)(o.default,{href:"/",children:"Home"}),(0,s.jsx)(c,{status:r,userName:h})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center justify-between",children:[(0,s.jsxs)("nav",{className:"flex items-center gap-8 text-gray-500 font-semibold",children:[(0,s.jsx)(o.default,{className:"text-green font-semibold text-2xl",href:"/",children:"Tealerin Milktea"}),(0,s.jsx)(o.default,{href:"/",children:"Home"})]}),(0,s.jsxs)("nav",{className:"flex items-center gap-4 text-gray-500 font-semibold",children:[(0,s.jsx)(c,{status:r,userName:h}),"authenticated"===r&&(0,s.jsxs)(o.default,{href:"/cart",className:"relative",children:[(0,s.jsx)(i,{}),(null==x?void 0:x.length)>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-4 bg-green-500 text-white text-xs py-1 px-1 rounded-full leading-3",children:x.length})]})]})]})]})}},3275:()=>{},4846:e=>{e.exports={style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontStyle:"normal"},className:"__className_f911a0"}}},e=>{var t=t=>e(e.s=t);e.O(0,[8114,7138,4962,998,7130,6215,1744],()=>t(8606)),_N_E=e.O()}]);