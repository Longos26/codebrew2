(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4394],{8511:(e,t,s)=>{Promise.resolve().then(s.bind(s,803))},803:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(7437),i=s(4514),a=s(2919),l=s(6281),r=s(2546),c=s(8497),m=s(7138),o=s(6463),u=s(2265),d=s(4962);function h(){let{id:e}=(0,o.useParams)(),[t,s]=(0,u.useState)(null),[h,x]=(0,u.useState)(!1),{loading:f,data:j}=(0,c.U)();async function p(t,s){t.preventDefault(),s={...s,_id:e};let n=new Promise(async(e,t)=>{(await fetch("/api/menu-items",{method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).ok?e():t()});await d.ZP.promise(n,{loading:"Saving this tasty item",success:"Saved",error:"Error"}),x(!0)}async function b(){let t=new Promise(async(t,s)=>{(await fetch("/api/menu-items?_id="+e,{method:"DELETE"})).ok?t():s()});await d.ZP.promise(t,{loading:"Deleting...",success:"Deleted",error:"Error"}),x(!0)}return((0,u.useEffect)(()=>{fetch("/api/menu-items").then(t=>{t.json().then(t=>{s(t.find(t=>t._id===e))})})},[]),h)?(0,o.redirect)("/menu-items"):f?"Loading user info...":j.admin?(0,n.jsxs)("section",{className:"mt-8",children:[(0,n.jsx)(r.Z,{isAdmin:!0}),(0,n.jsx)("div",{className:"max-w-2xl mx-auto mt-8",children:(0,n.jsxs)(m.default,{href:"/menu-items",className:"button",children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)("span",{children:"Show all menu items"})]})}),(0,n.jsx)(l.Z,{menuItem:t,onSubmit:p}),(0,n.jsx)("div",{className:"max-w-md mx-auto mt-2",children:(0,n.jsx)("div",{className:"max-w-xs ml-auto pl-4",children:(0,n.jsx)(i.Z,{label:"Delete this menu item",onDelete:b})})})]}):"Not an admin."}},4514:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(7437),i=s(2265);function a(e){let{label:t,onDelete:s}=e,[a,l]=(0,i.useState)(!1);return a?(0,n.jsx)("div",{className:"fixed bg-black/80 inset-0 flex items-center h-full justify-center",children:(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,n.jsx)("div",{children:"Are you sure you want to delete?"}),(0,n.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,n.jsx)("button",{type:"button",onClick:()=>l(!1),children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{s(),l(!1)},type:"button",className:"primary",children:"Yes,\xa0Delete!"})]})]})}):(0,n.jsx)("button",{type:"button",onClick:()=>l(!0),children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7138,4962,6648,1149,7130,6215,1744],()=>t(8511)),_N_E=e.O()}]);