(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9867],{8567:(e,t,s)=>{Promise.resolve().then(s.bind(s,5442))},6463:(e,t,s)=>{"use strict";var a=s(1169);s.o(a,"redirect")&&s.d(t,{redirect:function(){return a.redirect}}),s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},5442:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(7437),r=s(2363),i=s(2215),n=s(2546),l=s(8497),c=s(2265);function d(){let{loading:e,data:t}=(0,l.U)(),[s,d]=(0,c.useState)([]),[o,u]=(0,c.useState)([]),[m,h]=(0,c.useState)("");(0,c.useEffect)(()=>{fetch("/api/categories").then(e=>{e.json().then(e=>d(e))}),fetch("/api/menu-items").then(e=>{e.json().then(e=>u(e))})},[]);let x=o.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())),f=s.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())),g=m.trim().length>0;return e?"Loading user info...":(null==t?void 0:t.admin)?(0,a.jsxs)("section",{className:"mt-8 max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,a.jsx)(n.Z,{isAdmin:!0}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search products or categories...",className:"px-4 py-2 border rounded",value:m,onChange:e=>h(e.target.value)}),(0,a.jsx)("button",{onClick:()=>h(""),className:"ml-27 px-4 py-2 bg-green-500 text-white rounded",children:"Clear"})]}),g&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Search Results"}),f.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Categories"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:f.map(e=>(0,a.jsx)("li",{className:"mt-1",children:e.name},e._id))})]}),x.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Products"}),(0,a.jsx)("div",{className:"grid sm:grid-cols-3 gap-4 mt-4",children:x.map(e=>(0,a.jsx)(i.default,{...e},e._id))})]})]}),!g&&s.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(r.Z,{mainHeader:e.name})}),(0,a.jsx)("div",{className:"grid sm:grid-cols-3 gap-4 mt-6 mb-12",children:o.filter(t=>t.category===e._id).map(e=>(0,a.jsx)(i.default,{...e},e._id))})]},e._id))]}):"Not an admin"}},6425:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,AppProvider:()=>d,B:()=>c});var a=s(7437),r=s(998),i=s(2265),n=s(4962);let l=(0,i.createContext)({});function c(e){var t;let s=e.basePrice||0;if((null===(t=e.size)||void 0===t?void 0:t.price)&&(s+=e.size.price),Array.isArray(e.extras))for(let t of e.extras)s+=t.price||0;return s*(e.quantity||1)}function d(e){let{children:t}=e,[s,c]=(0,i.useState)([]),d=window.localStorage;function o(e){d&&d.setItem("cart",JSON.stringify(e))}return(0,i.useEffect)(()=>{if(d&&d.getItem("cart"))try{let e=JSON.parse(d.getItem("cart"));Array.isArray(e)&&c(e)}catch(e){console.error("Failed to parse cart from localStorage:",e),d.removeItem("cart")}},[d]),(0,a.jsx)(r.SessionProvider,{children:(0,a.jsx)(l.Provider,{value:{cartProducts:s,setCartProducts:c,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!((e.stock||0)>0)){n.ZP.error("Cannot add item to cart");return}c(r=>{let i=r.findIndex(a=>{var r;return a._id===e._id&&(null===(r=a.size)||void 0===r?void 0:r._id)===(null==t?void 0:t._id)&&JSON.stringify(a.extras)===JSON.stringify(s)});if(-1!==i){let e=[...r];return e[i].quantity+=a,o(e),e}{let i=[...r,{...e,size:t,extras:s,quantity:a}];return o(i),i}})},removeCartProduct:function(e){c(t=>{let s=t.filter((t,s)=>s!==e);return o(s),s}),n.ZP.success("Product removed")},clearCart:function(){c([]),o([])}},children:t})})}},8497:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var a=s(2265);function r(){let[e,t]=(0,a.useState)(!1),[s,r]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{r(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),r(!1)})})},[]),{loading:s,data:e}}},2363:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(7437);function r(e){let{subHeader:t,mainHeader:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"uppercase text-white-500 font-semibold leading-4",children:t}),(0,a.jsx)("h2",{className:"text-green-500 font-bold text-4xl italic",children:s})]})}},2546:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(7437),r=s(7138),i=s(6463),n=s(2265);function l(e){let{isAdmin:t,isNewUser:s}=e,l=(0,i.usePathname)(),[c,d]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"flex mx-auto gap-2 tabs justify-center flex-wrap",children:[(0,a.jsx)(r.default,{className:"/profile"===l?"active":"",href:"/profile",children:"Profile"}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{className:"/menu-notadmin"===l?"active":"",href:"/menu-notadmin",children:"Staff Menu Here"}),(0,a.jsx)(r.default,{className:"/staffreceipt"===l?"active":"",href:"/staffreceipt",children:"Staff Receipt"})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{className:"/menu-list"===l?"active":"",href:"/menu-list",children:"Menu Here"}),(0,a.jsx)(r.default,{href:"/categories",className:"/categories"===l?"active":"",children:"Categories"}),(0,a.jsx)(r.default,{href:"/menu-items",className:l.includes("menu-items")?"active":"",children:"Add Items"}),(0,a.jsx)(r.default,{className:l.includes("/users")?"active":"",href:"/users",onClick:()=>{s&&(d(!0),setTimeout(()=>{d(!1)},5e3))},children:"Users"}),(0,a.jsx)(r.default,{className:l.includes("/sales")?"active":"",href:"/sales",children:"Sales"}),(0,a.jsx)(r.default,{className:l.includes("/receipt")?"active":"",href:"/receipt",children:"Receipt"}),(0,a.jsx)(r.default,{className:l.includes("/stocks")?"active":"",href:"/stocks",children:"Stocks"})]}),c&&(0,a.jsx)("div",{className:"text-red-500 mt-2",children:"Wait for admin permission on this account."})]})}},2215:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(7437),r=s(6425),i=s(2265);function n(e){let{hasSizesOrExtras:t,onClick:s,basePrice:r,image:n,stock:l}=e,[c,d]=(0,i.useState)(!1),o=l<=0||c,u=async()=>{o||(d(!0),await new Promise(e=>setTimeout(e,300)),s(r),d(!1))};return!t||o?(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{type:"button",onClick:u,className:"w-full ".concat(o?"bg-gray-500":"bg-green-500"," text-white rounded-full px-8 py-2"),disabled:o,children:(0,a.jsx)("span",{children:"Add to cart ₱".concat(r)})})}):(0,a.jsx)("button",{type:"button",onClick:u,className:"mt-4 ".concat(o?"bg-gray-500":"bg-green-500"," text-white rounded-full px-8 py-2"),disabled:o,children:(0,a.jsx)("span",{children:"Add to cart (from ₱".concat(r,")")})})}var l=s(6648);function c(e){let{onAddToCart:t,stock:s,...r}=e,{image:c,description:d,name:o,basePrice:u,sizes:m,extraIngredientPrices:h}=r,x=(null==m?void 0:m.length)>0||(null==h?void 0:h.length)>0,[f,g]=(0,i.useState)(!1),j=s>0;return(0,a.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg text-center group hover:bg-white hover:shadow-md hover:shadow-black/25 transition-all",children:[(0,a.jsx)("div",{className:"text-center",children:c?(0,a.jsx)(l.default,{src:c,alt:o,className:"max-h-24 block mx-auto",width:96,height:96}):(0,a.jsx)("div",{className:"max-h-24 block mx-auto bg-gray-300 rounded"})}),(0,a.jsx)("h4",{className:"font-semibold text-xl my-3",children:o}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:d}),(0,a.jsx)("p",{className:"text-lg font-semibold flex items-center justify-center space-x-2",children:j?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-green-600",children:"Available"})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-red-600",children:"Sold Out"})})}),(0,a.jsx)(n,{image:c,hasSizesOrExtras:x,onClick:()=>{f||(g(!0),t(),setTimeout(()=>{g(!1)},2e3))},basePrice:u,disabled:f||!j})]})}var d=s(4962);function o(e){let{image:t,name:s,description:n,basePrice:o,stock:u,sizes:m,extraIngredientPrices:h}=e,[x]=(0,i.useState)(u),[f,g]=(0,i.useState)(null),[j,p]=(0,i.useState)([]),[v,N]=(0,i.useState)(!1),[b,y]=(0,i.useState)(1),{addToCart:w}=(0,i.useContext)(r.A);async function C(){if(x<=0){d.Am.error("This item is sold out and cannot be added to the cart.");return}if(((null==m?void 0:m.length)>0||(null==h?void 0:h.length)>0)&&!v){N(!0);return}w(e,f,j,b),d.Am.success("Item added to cart successfully!"),await new Promise(e=>setTimeout(e,1e3)),N(!1)}return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)("div",{onClick:()=>N(!1),className:"fixed inset-0 bg-black/80 flex items-center justify-center",children:(0,a.jsx)("div",{onClick:e=>e.stopPropagation(),className:"my-8 bg-white p-2 rounded-lg max-w-md",children:(0,a.jsxs)("div",{className:"overflow-y-scroll p-2",style:{maxHeight:"calc(100vh - 100px)"},children:[(0,a.jsx)(l.default,{src:t||null,alt:s,width:300,height:200,className:"mx-auto"}),(0,a.jsx)("h2",{className:"text-lg font-bold text-center mb-2",children:s}),(0,a.jsx)("p",{className:"text-center text-gray-500 text-sm mb-2",children:n}),(null==m?void 0:m.length)>0&&(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)("h3",{className:"text-center text-gray-700",children:"Pick your size"}),m.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 p-4 border rounded-md mb-1",children:[(0,a.jsx)("input",{type:"radio",onChange:()=>g(e),checked:(null==f?void 0:f._id)===e._id,name:"size"}),e.name," ₱",e.price]},e._id))]}),(null==h?void 0:h.length)>0&&(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)("h3",{className:"text-center text-gray-700",children:"Any extras?"}),h.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 p-4 border rounded-md mb-1",children:[(0,a.jsx)("input",{type:"checkbox",onChange:t=>{t.target.checked?p(t=>[...t,e]):p(t=>t.filter(t=>t._id!==e._id))},checked:j.some(t=>t._id===e._id),name:e.name}),e.name," +₱",e.price]},e._id))]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("button",{className:"text-gray-700 p-2 border rounded",onClick:()=>y(e=>Math.max(e-1,1)),disabled:x<=0,children:"-"}),(0,a.jsx)("span",{className:"text-lg",children:b}),(0,a.jsx)("button",{className:"text-gray-700 p-2 border rounded",onClick:()=>y(e=>Math.min(e+1,x)),disabled:x<=0,children:"+"})]}),(0,a.jsx)("div",{className:"primary sticky bottom-2",children:(0,a.jsxs)("button",{onClick:C,className:"w-full p-3 bg-green-500 text-white rounded-md",children:["Add to cart ₱",(o+((null==f?void 0:f.price)||0)+j.reduce((e,t)=>e+t.price,0))*b]})}),(0,a.jsx)("button",{className:"mt-2",onClick:()=>N(!1),children:"Cancel"})]})})}),(0,a.jsx)(c,{onAddToCart:C,...e})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7138,4962,6648,998,7130,6215,1744],()=>t(8567)),_N_E=e.O()}]);