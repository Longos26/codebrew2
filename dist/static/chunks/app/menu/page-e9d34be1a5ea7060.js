(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7106],{9688:(e,t,r)=>{Promise.resolve().then(r.bind(r,2955))},7616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let s=r(2265);function n(e,t){let r=(0,s.useRef)(()=>{}),n=(0,s.useRef)(()=>{});return(0,s.useMemo)(()=>e&&t?s=>{null===s?(r.current(),n.current()):(r.current=a(e,s),n.current=a(t,s))}:e||t,[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return s}});let s=r(9920)._(r(2265)).default.createContext(null)},2955:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(7437),n=r(2363),a=r(2215),l=r(2265);function i(){let[e,t]=(0,l.useState)([]),[r,i]=(0,l.useState)([]),[c,d]=(0,l.useState)("");(0,l.useEffect)(()=>{fetch("/api/categories").then(e=>{e.json().then(e=>t(e))}),fetch("/api/menu-items").then(e=>{e.json().then(e=>i(e))})},[]);let o=r.filter(e=>e.name.toLowerCase().includes(c.toLowerCase()));return(0,s.jsxs)("section",{className:"mt-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search products...",className:"px-4 py-2 border rounded",value:c,onChange:e=>d(e.target.value)}),(0,s.jsx)("button",{onClick:()=>d(""),className:"ml-2 px-4 py-2 bg-green-500 text-white rounded",children:"Clear"})]}),(null==e?void 0:e.length)>0&&e.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(n.Z,{mainHeader:e.name})}),(0,s.jsx)("div",{className:"grid sm:grid-cols-3 gap-4 mt-6 mb-12",children:o.filter(t=>t.category===e._id).map(e=>(0,s.jsx)(a.default,{...e},e._id))})]},e._id))]})}},6425:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AppProvider:()=>d,B:()=>c});var s=r(7437),n=r(998),a=r(2265),l=r(4962);let i=(0,a.createContext)({});function c(e){var t;let r=e.basePrice||0;if((null===(t=e.size)||void 0===t?void 0:t.price)&&(r+=e.size.price),Array.isArray(e.extras))for(let t of e.extras)r+=t.price||0;return r*(e.quantity||1)}function d(e){let{children:t}=e,[r,c]=(0,a.useState)([]),d=window.localStorage;function o(e){d&&d.setItem("cart",JSON.stringify(e))}return(0,a.useEffect)(()=>{if(d&&d.getItem("cart"))try{let e=JSON.parse(d.getItem("cart"));Array.isArray(e)&&c(e)}catch(e){console.error("Failed to parse cart from localStorage:",e),d.removeItem("cart")}},[d]),(0,s.jsx)(n.SessionProvider,{children:(0,s.jsx)(i.Provider,{value:{cartProducts:r,setCartProducts:c,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!((e.stock||0)>0)){l.ZP.error("Cannot add item to cart");return}c(n=>{let a=n.findIndex(s=>{var n;return s._id===e._id&&(null===(n=s.size)||void 0===n?void 0:n._id)===(null==t?void 0:t._id)&&JSON.stringify(s.extras)===JSON.stringify(r)});if(-1!==a){let e=[...n];return e[a].quantity+=s,o(e),e}{let a=[...n,{...e,size:t,extras:r,quantity:s}];return o(a),a}})},removeCartProduct:function(e){c(t=>{let r=t.filter((t,r)=>r!==e);return o(r),r}),l.ZP.success("Product removed")},clearCart:function(){c([]),o([])}},children:t})})}},2363:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(7437);function n(e){let{subHeader:t,mainHeader:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"uppercase text-white-500 font-semibold leading-4",children:t}),(0,s.jsx)("h2",{className:"text-green-500 font-bold text-4xl italic",children:r})]})}},2215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(7437),n=r(6425),a=r(2265);function l(e){let{hasSizesOrExtras:t,onClick:r,basePrice:n,image:l,stock:i}=e,[c,d]=(0,a.useState)(!1),o=i<=0||c,u=async()=>{o||(d(!0),await new Promise(e=>setTimeout(e,300)),r(n),d(!1))};return!t||o?(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"button",onClick:u,className:"w-full ".concat(o?"bg-gray-500":"bg-green-500"," text-white rounded-full px-8 py-2"),disabled:o,children:(0,s.jsx)("span",{children:"Add to cart ₱".concat(n)})})}):(0,s.jsx)("button",{type:"button",onClick:u,className:"mt-4 ".concat(o?"bg-gray-500":"bg-green-500"," text-white rounded-full px-8 py-2"),disabled:o,children:(0,s.jsx)("span",{children:"Add to cart (from ₱".concat(n,")")})})}var i=r(6648);function c(e){let{onAddToCart:t,stock:r,...n}=e,{image:c,description:d,name:o,basePrice:u,sizes:m,extraIngredientPrices:x}=n,h=(null==m?void 0:m.length)>0||(null==x?void 0:x.length)>0,[f,p]=(0,a.useState)(!1),g=r>0;return(0,s.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg text-center group hover:bg-white hover:shadow-md hover:shadow-black/25 transition-all",children:[(0,s.jsx)("div",{className:"text-center",children:c?(0,s.jsx)(i.default,{src:c,alt:o,className:"max-h-24 block mx-auto",width:96,height:96}):(0,s.jsx)("div",{className:"max-h-24 block mx-auto bg-gray-300 rounded"})}),(0,s.jsx)("h4",{className:"font-semibold text-xl my-3",children:o}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:d}),(0,s.jsx)("p",{className:"text-lg font-semibold flex items-center justify-center space-x-2",children:g?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:"text-green-600",children:"Available"})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:"text-red-600",children:"Sold Out"})})}),(0,s.jsx)(l,{image:c,hasSizesOrExtras:h,onClick:()=>{f||(p(!0),t(),setTimeout(()=>{p(!1)},2e3))},basePrice:u,disabled:f||!g})]})}var d=r(4962);function o(e){let{image:t,name:r,description:l,basePrice:o,stock:u,sizes:m,extraIngredientPrices:x}=e,[h]=(0,a.useState)(u),[f,p]=(0,a.useState)(null),[g,b]=(0,a.useState)([]),[j,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(1),{addToCart:_}=(0,a.useContext)(n.A);async function C(){if(h<=0){d.Am.error("This item is sold out and cannot be added to the cart.");return}if(((null==m?void 0:m.length)>0||(null==x?void 0:x.length)>0)&&!j){v(!0);return}_(e,f,g,y),d.Am.success("Item added to cart successfully!"),await new Promise(e=>setTimeout(e,1e3)),v(!1)}return(0,s.jsxs)(s.Fragment,{children:[j&&(0,s.jsx)("div",{onClick:()=>v(!1),className:"fixed inset-0 bg-black/80 flex items-center justify-center",children:(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"my-8 bg-white p-2 rounded-lg max-w-md",children:(0,s.jsxs)("div",{className:"overflow-y-scroll p-2",style:{maxHeight:"calc(100vh - 100px)"},children:[(0,s.jsx)(i.default,{src:t||null,alt:r,width:300,height:200,className:"mx-auto"}),(0,s.jsx)("h2",{className:"text-lg font-bold text-center mb-2",children:r}),(0,s.jsx)("p",{className:"text-center text-gray-500 text-sm mb-2",children:l}),(null==m?void 0:m.length)>0&&(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("h3",{className:"text-center text-gray-700",children:"Pick your size"}),m.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-4 border rounded-md mb-1",children:[(0,s.jsx)("input",{type:"radio",onChange:()=>p(e),checked:(null==f?void 0:f._id)===e._id,name:"size"}),e.name," ₱",e.price]},e._id))]}),(null==x?void 0:x.length)>0&&(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("h3",{className:"text-center text-gray-700",children:"Any extras?"}),x.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-4 border rounded-md mb-1",children:[(0,s.jsx)("input",{type:"checkbox",onChange:t=>{t.target.checked?b(t=>[...t,e]):b(t=>t.filter(t=>t._id!==e._id))},checked:g.some(t=>t._id===e._id),name:e.name}),e.name," +₱",e.price]},e._id))]}),(0,s.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,s.jsx)("button",{className:"text-gray-700 p-2 border rounded",onClick:()=>N(e=>Math.max(e-1,1)),disabled:h<=0,children:"-"}),(0,s.jsx)("span",{className:"text-lg",children:y}),(0,s.jsx)("button",{className:"text-gray-700 p-2 border rounded",onClick:()=>N(e=>Math.min(e+1,h)),disabled:h<=0,children:"+"})]}),(0,s.jsx)("div",{className:"primary sticky bottom-2",children:(0,s.jsxs)("button",{onClick:C,className:"w-full p-3 bg-green-500 text-white rounded-md",children:["Add to cart ₱",(o+((null==f?void 0:f.price)||0)+g.reduce((e,t)=>e+t.price,0))*y]})}),(0,s.jsx)("button",{className:"mt-2",onClick:()=>v(!1),children:"Cancel"})]})})}),(0,s.jsx)(c,{onAddToCart:C,...e})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4962,6648,998,7130,6215,1744],()=>t(9688)),_N_E=e.O()}]);