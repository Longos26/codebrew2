(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3613],{4320:(e,s,t)=>{Promise.resolve().then(t.bind(t,8227))},8227:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(7437),r=t(2546),l=t(2265),n=t(6463),i=t(4962),c=t(7214),o=t(551),d=t(468),u=t(998);t(8497);let x=()=>{var e;let[s,t,x]=(0,l.useState)([]),[m,h,g]=(0,l.useState)(!0);(0,n.useRouter)();let[p,j]=(0,l.useState)(null),[f,N]=(0,l.useState)(!1),{data:v}=(0,u.useSession)(),w=(null==v?void 0:null===(e=v.user)||void 0===e?void 0:e.isAdmin)||!1,[b,y]=(0,l.useState)(0),[P,S]=(0,l.useState)(5),_=async()=>{h(!0);try{let e=await fetch("/api/receipt",{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch receipts");let s=await e.json();t(s)}catch(e){console.error("Error fetching receipts:",e),i.ZP.error("Failed to load receipts")}finally{h(!1)}};(0,l.useEffect)(()=>{_();let e=setInterval(_,3e4);return()=>clearInterval(e)},[]);let k=e=>{j(e),N(!0)};return m?"Loading user info...":(null==v?void 0:v.user)?(0,a.jsxs)("section",{className:"mt-8 max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,a.jsx)(r.Z,{isAdmin:w})," ",(0,a.jsx)("div",{className:"flex justify-between items-center mt-8",children:(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Receipts"})}),(0,a.jsx)("div",{className:"mt-8",children:m?(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)(d.Z,{})}):s.length>0?s.slice(b*P,b*P+P).map(e=>(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg mb-2 p-4 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 grow",children:[(0,a.jsx)("div",{className:"text-gray-900",children:e.customer?(0,a.jsx)("span",{children:e.customer.staffname}):(0,a.jsx)("span",{className:"italic",children:"No Name"})}),(0,a.jsxs)("span",{className:"text-gray-500",children:["â‚±",e.subtotal.toFixed(2)]}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleString("en-PH")})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{onClick:()=>k(e),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"View"})})]},e._id)):(0,a.jsx)("p",{className:"text-gray-500",children:"No receipts found."})}),(0,a.jsx)(c.Z,{isOpen:f,onClose:()=>N(!1),receipt:p}),(0,a.jsx)(o.Z,{component:"div",count:s.length,page:b,onPageChange:(e,s)=>{y(s)},rowsPerPage:P,onRowsPerPageChange:e=>{S(parseInt(e.target.value,10)),y(0)}})]}):"Not an User."}}},e=>{var s=s=>e(e.s=s);e.O(0,[7138,4962,6648,998,5060,551,4564,7130,6215,1744],()=>s(4320)),_N_E=e.O()}]);