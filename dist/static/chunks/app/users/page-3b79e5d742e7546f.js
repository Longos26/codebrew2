(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6240],{976:(e,t,r)=>{Promise.resolve().then(r.bind(r,87))},468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var s=r(8646),a=r(2265),n=r(4839),i=r(6990),l=r(3098),c=r(4086),o=r(109),d=r(9570),u=r(2272),m=r(8683),f=r(2296),h=r(587);function p(e){return(0,h.ZP)("MuiCircularProgress",e)}(0,f.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var x=r(7437);function g(){let e=(0,s._)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return g=function(){return e},e}function v(){let e=(0,s._)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"]);return v=function(){return e},e}function j(){let e=(0,s._)(["\n        animation: "," 1.4s linear infinite;\n      "]);return j=function(){return e},e}function y(){let e=(0,s._)(["\n        animation: "," 1.4s ease-in-out infinite;\n      "]);return y=function(){return e},e}let N=(0,l.F4)(g()),b=(0,l.F4)(v()),k="string"!=typeof N?(0,l.iv)(j(),N):null,w="string"!=typeof b?(0,l.iv)(y(),b):null,S=e=>{let{classes:t,variant:r,color:s,disableShrink:a}=e,n={root:["root",r,"color".concat((0,u.Z)(s))],svg:["svg"],circle:["circle","circle".concat((0,u.Z)(r)),a&&"circleDisableShrink"]};return(0,i.Z)(n,p,t)},P=(0,c.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["color".concat((0,u.Z)(r.color))]]}})((0,o.Z)(e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:k||{animation:"".concat(N," 1.4s linear infinite")}},...Object.entries(t.palette).filter((0,m.Z)()).map(e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})]}})),C=(0,c.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),E=(0,c.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.circle,t["circle".concat((0,u.Z)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((0,o.Z)(e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:w||{animation:"".concat(b," 1.4s ease-in-out infinite")}}]}})),_=a.forwardRef(function(e,t){let r=(0,d.i)({props:e,name:"MuiCircularProgress"}),{className:s,color:a="primary",disableShrink:i=!1,size:l=40,style:c,thickness:o=3.6,value:u=0,variant:m="indeterminate",...f}=r,h={...r,color:a,disableShrink:i,size:l,thickness:o,value:u,variant:m},p=S(h),g={},v={},j={};if("determinate"===m){let e=2*Math.PI*((44-o)/2);g.strokeDasharray=e.toFixed(3),j["aria-valuenow"]=Math.round(u),g.strokeDashoffset="".concat(((100-u)/100*e).toFixed(3),"px"),v.transform="rotate(-90deg)"}return(0,x.jsx)(P,{className:(0,n.Z)(p.root,s),style:{width:l,height:l,...v,...c},ownerState:h,ref:t,role:"progressbar",...j,...f,children:(0,x.jsx)(C,{className:p.svg,ownerState:h,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44),children:(0,x.jsx)(E,{className:p.circle,style:g,ownerState:h,cx:44,cy:44,r:(44-o)/2,fill:"none",strokeWidth:o})})})})},87:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(7437),a=r(2265),n=r(2546),i=r(551),l=r(8497);function c(e){let{user:t,isOpen:r,onClose:n}=e,[i,l]=(0,a.useState)((null==t?void 0:t.name)||""),[c,o]=(0,a.useState)((null==t?void 0:t.email)||""),[d,u]=(0,a.useState)((null==t?void 0:t.admin)||!1),[m,f]=(0,a.useState)((null==t?void 0:t.isVerified)||!1);(0,a.useEffect)(()=>{l((null==t?void 0:t.name)||""),o((null==t?void 0:t.email)||""),u((null==t?void 0:t.admin)||!1),f((null==t?void 0:t.isVerified)||!1)},[t,r]);let h=async()=>{if(!(null==t?void 0:t._id)){alert("User ID is missing.");return}let e={_id:t._id,name:i,email:c,admin:d,isVerified:m};try{let t=await fetch("/api/modal",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to update user");await t.json(),alert("User updated successfully"),n()}catch(e){console.error("Error updating user:",e),alert("Failed to update user. Please try again.")}};return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Edit User"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:i,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:c,onChange:e=>o(e.target.value)})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:d,onChange:e=>u(e.target.checked)}),(0,s.jsx)("span",{className:"ml-2",children:"Admin"})]})}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:m,onChange:e=>f(e.target.checked)}),(0,s.jsx)("span",{className:"ml-2",children:"Verify User"})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-500 text-white rounded-md",onClick:n,children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md",onClick:h,children:"Save"})]})]})}):null}var o=r(468);function d(){let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),{loading:f,data:h}=(0,l.U)(),[p,x]=(0,a.useState)(!0),[g,v]=(0,a.useState)(0),[j,y]=(0,a.useState)(5);(0,a.useEffect)(()=>{N()},[]);let N=async()=>{x(!0);try{let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let r=await e.json();t(r)}catch(e){console.error("Error fetching users:",e),alert("Failed to load users. Please try again later.")}finally{x(!1)}},b=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let r=await fetch("/api/users?id=".concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to delete user")}t(t=>t.filter(t=>t._id!==e)),alert("User deleted successfully.")}catch(e){console.error("Error deleting user:",e),alert("An error occurred while deleting the user.")}},k=async e=>{try{if(!e._id)throw Error("User ID is required for update");let r=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update user")}let{user:s}=await r.json();t(e=>e.map(e=>e._id===s._id?s:e)),alert("User updated successfully.")}catch(e){console.error("Error updating user:",e),alert("An error occurred while updating the user: ".concat(e.message))}},w=e=>{m(e),d(!0)};return f?"Loading user info...":(null==h?void 0:h.admin)?(0,s.jsxs)("section",{className:"mt-8 max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,s.jsx)(n.Z,{isAdmin:!0}),(0,s.jsx)("div",{className:"mt-8",children:p?(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)(o.Z,{})}):e.length>0?e.slice(g*j,g*j+j).map(e=>(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg mb-2 p-1 px-4 flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 grow",children:[(0,s.jsx)("div",{className:"text-gray-900",children:e.name||(0,s.jsx)("span",{className:"italic",children:"No name"})}),(0,s.jsx)("span",{className:"text-gray-500",children:e.email})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>w(e),className:"button bg-green-500 text-white rounded px-4 py-1",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>b(e._id),className:"button bg-red-500 text-white rounded px-4 py-1",children:"Delete"})]})]},e._id)):(0,s.jsx)("p",{className:"text-gray-500",children:"No users found."})}),(0,s.jsx)(i.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:e.length,rowsPerPage:j,page:g,onPageChange:(e,t)=>v(t),onRowsPerPageChange:e=>{y(parseInt(e.target.value,10)),v(0)}}),u&&(0,s.jsx)(c,{user:u,isOpen:r,onClose:()=>d(!1),onUpdate:k})]}):"Not an admin"}},8497:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(2265);function a(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{a(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),a(!1)})})},[]),{loading:r,data:e}}},2546:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(7437),a=r(7138),n=r(6463),i=r(2265);function l(e){let{isAdmin:t,isNewUser:r}=e,l=(0,n.usePathname)(),[c,o]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"flex mx-auto gap-2 tabs justify-center flex-wrap",children:[(0,s.jsx)(a.default,{className:"/profile"===l?"active":"",href:"/profile",children:"Profile"}),!t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{className:"/menu-notadmin"===l?"active":"",href:"/menu-notadmin",children:"Staff Menu Here"}),(0,s.jsx)(a.default,{className:"/staffreceipt"===l?"active":"",href:"/staffreceipt",children:"Staff Receipt"})]}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{className:"/menu-list"===l?"active":"",href:"/menu-list",children:"Menu Here"}),(0,s.jsx)(a.default,{href:"/categories",className:"/categories"===l?"active":"",children:"Categories"}),(0,s.jsx)(a.default,{href:"/menu-items",className:l.includes("menu-items")?"active":"",children:"Add Items"}),(0,s.jsx)(a.default,{className:l.includes("/users")?"active":"",href:"/users",onClick:()=>{r&&(o(!0),setTimeout(()=>{o(!1)},5e3))},children:"Users"}),(0,s.jsx)(a.default,{className:l.includes("/sales")?"active":"",href:"/sales",children:"Sales"}),(0,s.jsx)(a.default,{className:l.includes("/receipt")?"active":"",href:"/receipt",children:"Receipt"}),(0,s.jsx)(a.default,{className:l.includes("/stocks")?"active":"",href:"/stocks",children:"Stocks"})]}),c&&(0,s.jsx)("div",{className:"text-red-500 mt-2",children:"Wait for admin permission on this account."})]})}},8646:(e,t,r)=>{"use strict";function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,{_:()=>s})}},e=>{var t=t=>e(e.s=t);e.O(0,[7138,5060,551,7130,6215,1744],()=>t(976)),_N_E=e.O()}]);